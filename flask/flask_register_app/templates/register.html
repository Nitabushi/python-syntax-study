<!doctype html>
<html>
<head><title>会員登録</title></head>
<body>
  <h1>会員登録フォーム</h1>
  <form method="POST" onsubmit="return confirm('本当にこの内容で登録して良いですか？');">
    {{ form.hidden_tag() }}
    <p>{{ form.username.label }} {{ form.username() }}</p>
    <p>{{ form.email.label }} {{ form.email() }}</p>
    <p>{{ form.password.label }} {{ form.password() }}</p>
    <p>{{ form.submit(id="submit-btn") }}</p>
  </form>

  <script>
    const inputs = document.querySelectorAll("input");
    const submitBtn = document.getElementById("submit-btn");

    function validateForm() {
        let allFilled = true;
        inputs.forEach(input => {
            if (input.type !== "hidden" && input.value.trim() === "") {
                allFilled = false;
            }
        });
        submitBtn.disabled = !allFilled;
    }

    inputs.forEach(input => {
        input.addEventListener("input", validateForm);
    });

    window.addEventListener("DOMContentLoaded", validateForm);
  </script>
</body>
</html>
